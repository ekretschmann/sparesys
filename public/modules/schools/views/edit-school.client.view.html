<section data-ng-controller="SchoolsController" data-ng-init="findOne()">
    <div class="sparesys-header">

        <div ng-include="'/modules/schools/views/partial/delete-school.modal.client.view.html'"></div>
        <div ng-include="'/modules/schools/views/partial/edit-school.modal.client.view.html'"></div>
        <!--<div ng-include="'/modules/schools/views/partial/add-teacher.modal.client.view.html'"></div>-->

        <div class="pull-right">

            <a href="" data-ng-click="editSchoolPopup(school)" data-ng-show="authentication.user._id == school.user._id"
               style="padding-right: 20px">
                Edit
            </a>

            <a href="" data-ng-click="areYouSureToDeleteSchool(school)"
               data-ng-show="authentication.user._id == school.user._id">
                Delete
            </a>

        </div>

        <div class="sparesys-title">
            {{school.name}}
        </div>


        <table>
            <tr>
                <td>City</td>
                <td style="padding-left: 5px">:</td>
                <td style="padding-left: 5px">{{school.city}}</td>
            </tr>
            <tr>
                <td>Country</td>
                <td style="padding-left: 5px">:</td>
                <td style="padding-left: 5px">{{school.country}}</td>
            </tr>
        </table>
    </div>

    <div class="sparesys-header" data-ng-show="school.schoolclasses.length === 0" style="padding-bottom: 10px">
        You have to <a href="" ng-click="addClassPopup()">create classes</a> for this school!
    </div>

    <div class="sparesys-header" >
        <div data-ng-show="school.teachers.length === 0">
            This school has no teachers. Please ask your teachers
            to subscribe to {{school.name}}.
            <div data-ng-if="authentication.user.roles.indexOf('teacher') > -1"
                 style="padding-top: 10px; padding-bottom: 10px">
                You can also <a href="" data-ng-click="subscribeTeacher(authentication.user)">subscribe as teacher</a>
                to this school yourself.
            </div>
            <div data-ng-if="authentication.user.roles.indexOf('teacher') === -1"
                 style="padding-top: 10px; padding-bottom: 10px">
                You can also edit your profile to register as teacher and subscribe
                to this school yourself.
            </div>
        </div>


        <div data-ng-if="school.teachers.length > 0">
            <table class="table-striped" style="width: 100%;">

                <thead>
                <tr>
                    <th class="sparesys-view-courses-course-column">Registered Teachers</th>
                </tr>
                </thead>
                <tbody>
                <tr data-ng-repeat="teacher in school.teachers"
                    data-ng-controller="UsersController"
                    data-ng-init="findTeacher(teacher)">


                    <td class="sparesys-view-object-content-cell">
                        {{teacher.displayName}}
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>


    <div class="sparesys-header">
        <div data-ng-if="school.students.length === 0">
            This school has no students. Please ask your students
            to subscribe to {{school.name}}.
        </div>

        <div data-ng-if="school.students.length > 0">
            <table class="table-striped" style="width: 100%;">

                <thead>
                <tr>
                    <th class="sparesys-view-courses-course-column">Registered Students</th>
                </tr>
                </thead>
                <tbody>
                <tr data-ng-repeat="student in school.students"
                    data-ng-controller="UsersController"
                    data-ng-init="findStudent(student)">


                    <td class="sparesys-view-object-content-cell">
                        {{student.displayName}}
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div>
        <small>
            <em class="text-muted">
                Created on
                <span data-ng-bind="school.created | date:'mediumDate'"></span>
                by
                <span data-ng-bind="school.user.displayName"></span>
            </em>
        </small>
    </div>
</section>