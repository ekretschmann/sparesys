<section data-ng-controller="SchoolsController" data-ng-init="find()">

    <div ng-include="'/modules/schools/views/partial/subscribe-student.modal.client.view.html'"></div>
    <div ng-include="'/modules/schools/views/partial/unsubscribe-student.modal.client.view.html'"></div>

    <div class="content-header">
        <div class="pull-right">
            <input ng-model="searchText"
                   class="form-control"
                   placeholder="Search">
        </div>
        <div class="title">
            Subscribe as Student to School
        </div>

    </div>

    <div data-ng-if="schools.length > 0">

        <table id="searchTextResults" class="table-striped">
            <thead>
            <tr>

                <th class="expands right-padded">School</th>
                <th class="right-padded">City</th>
                <th class="right-padded">Country</th>
                <th>Administrator</th>
            </tr>
            </thead>
            <tbody>
            <tr data-ng-repeat="school in schools | filter:searchText">

                <td class="right-padded nobreak-label">
                    <div data-ng-if="school.students.indexOf(authentication.user._id) != -1">
                        <a href="" data-ng-click="unsubscribeStudentPopup(school)">{{school.name}}
                            <i
                                    class="glyphicon glyphicon-pencil">
                            </i>
                        </a>
                    </div>

                    <div data-ng-if="school.students.indexOf(authentication.user._id) === -1">
                        <a href="" data-ng-click="subscribeStudentPopup(school)">{{school.name}}</a>
                    </div>
                </td>

                <td class="right-padded nobreak-label">{{school.city}}</td>
                <td class="right-padded nobreak-label">{{school.country}}</td>

                <td class="nobreak-label">{{school.user.displayName}}</td>
            </tr>
            </tbody>
        </table>
    </div>

    <div data-ng-hide="!schools.$resolved || schools.length">
        There are no Schools yet.

        <div data-ng-if="authentication.user.roles.indexOf('headmaster') > -1">
            In your role as headmaster, you can register a school following this
            <a href="/#!/schools/register">link</a> or use the menu.

        </div>
    </div>
</section>