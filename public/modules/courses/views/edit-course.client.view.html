<section data-ng-controller="CoursesController"
         data-ng-init="findOne()">

    <div ng-include="'/modules/courses/views/partial/delete-course.modal.client.view.html'"></div>
    <div ng-include="'/modules/courses/views/partial/edit-course.modal.client.view.html'"></div>
    <div ng-include="'/modules/courses/views/partial/publish-course.modal.client.view.html'"></div>
    <div ng-include="'/modules/packs/views/partial/delete-pack.modal.client.view.html'"></div>
    <div ng-include="'/modules/courses/views/partial/add-pack.modal.client.view.html'"></div>

    <div class="content-header">
        <div class="submenu">
            <span ng-include="'/modules/courses/views/partial/edit-course-menu.client.view.html'"></span>
        </div>

        <div class="title">
            {{course.name}}
        </div>

        <div class="headerinfo">
            <span ng-include="'/modules/courses/views/partial/edit-course-headerinfo.client.view.html'"></span>
        </div>
    </div>


    <div data-ng-if="course.packs.length === 0">
        <div class="content-section" data-ng-if="userHasCreatedPackBefore()">
            You have to <a href="" ng-click="addPackToCoursePopup()">create packs</a> for this course!
        </div>
    </div>

    <div data-ng-show="course.packs.length > 0">

        <div class="content-section ">

            <table class="table-striped">
                <thead>
                <tr>
                    <th></th>
                    <th>Pack</th>
                    <th class="nobreak-label right-aligned">Number of Cards</th>
                </tr>
                </thead>
                <tbody ui-sortable="sortableOptions"
                       data-ng-model="course.packs">
                <tr data-ng-controller="PacksController"
                    data-ng-repeat="packId in course.packs"
                    data-ng-init="findById(packId)"
                    style="cursor: move">
                    <td class="right-padded">
                        <a href="">
                            <i data-ng-click="areYouSureToDeletePack(pack)"
                               class="glyphicon glyphicon-remove-sign">
                            </i>
                        </a>
                    </td>

                    <td>
                        <a data-ng-href="#!/packs/{{pack._id}}/edit">{{pack.name}}</a>
                    </td>
                    <td class="expands right-aligned">
                        {{pack.cards.length}}
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <div data-ng-if="showhelp || !userHasCreatedCardBefore()">

            <div class="content-section ">
                <table>
                    <tr>
                        <td>
                            <img class="right-padded size-64"
                                 src="/modules/core/img/brand/teacher-man-medium.gif">
                        </td>
                        <td class="top-aligned">
                            So, a pack has a number of cards and you have to add them for
                            each of your packs. Click on one of your packs
                            to be able to do this.
                        </td>
                    </tr>
                </table>
            </div>
        </div>

    </div>

    <div data-ng-if="showhelp || !userHasCreatedPackBefore()">


        <div class="content-section ">
            <table>
                <tr>
                    <td class="top-aligned">
                        Ok. Now, a course has a number of packs. If you are creating
                        a language course, you can for example put all the colors into one pack,
                        the days of the week into another and so on. To do this, click on the
                        <a href="" ng-click="addPackToCoursePopup()">Add Packs</a> link above.
                    </td>
                    <td>
                        <img class="right-padded size-64"
                             src="/modules/core/img/brand/teacher-woman-medium.gif">
                    </td>
                </tr>
            </table>
        </div>
    </div>


    <div data-ng-if="showhelp || !userHasEditedCourseBefore()">
        <div class="content-section">

            <table>
                <tr>
                    <td>
                        <img class="right-padded size-64"
                             src="/modules/core/img/brand/guru-medium.gif">
                    </td>
                    <td class="top-aligned">
                        If you are a guru like me, you can tell the Rememberators more about your course.
                        If you set a language, they will try to read the questions to you in that language.
                        This can be very useful if you are creating a foreign language course. You can also decide what
                        is on the front and back of your card, like "French" and "English". To do this,
                        click on the <a href="" ng-click="editCoursePopup(course)">Edit</a> link above.
                    </td>
                </tr>
            </table>

        </div>
    </div>


    <div class="content-last-section">

        <div>
            <small>
                <em class="text-muted">Course created on {{course.created | date:'medium'}}</em>
            </small>
        </div>
        <div data-ng-if="course.updated">
            <small>
                <em class="text-muted">Course last update on {{course.updated | date:'medium'}}</em>
            </small>
        </div>

    </div>


</section>
