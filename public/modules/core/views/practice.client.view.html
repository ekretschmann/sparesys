<section data-ng-controller="PracticeController" data-ng-init="initPractice()">


    <div ng-include="'/modules/core/views/partial/practice-options.modal.client.view.html'"></div>


    <!--<div class="content-header">-->


    <!--<div class="pull-right">-->
    <!--<a class="btn btn-rememberators" data-ng-click="stopPracitcing();">-->
    <!--<i class="glyphicon glyphicon-stop"></i> Stop Practicing-->
    <!--</a>-->

    <!--<a class="btn btn-rememberators-small" data-ng-click="optionsModal();">-->
    <!--<i class="glyphicon glyphicon-align-justify"></i>-->
    <!--</a>-->


    <!--</div>-->


    <!--</div>-->

    <!--</div>-->
    <!--</div>-->

    <div data-ng-if="cards && cards.length > 0">


        <div class="row">

            <div class="col-md-2 flashcard-left col-lg-3">

                <div class="title">
                    {{course.name}}

                </div>
                <div>
                    <svg id="fillgauge" width="150px" height="140px"></svg>
                </div>

                <div tooltip="{{challengeDescription}}">{{challengeName}}
                    <a href="" tooltip-trigger="mouseenter"><i class="glyphicon glyphicon-info-sign small"></i></a>
                </div>


                <div class="flashcard-section">
                    <a class="btn btn-rememberators" data-ng-click="stopPracitcing();">
                        <i class="glyphicon glyphicon-stop"></i> Stop Practicing
                    </a>

                </div>
            </div>

            <!--<div data-ng-if="authentication.user.roles.indexOf('receive-rewards') > -1"-->
            <!--style="margin-bottom: 0px; padding-left:15px; padding-right: 15px">-->
            <!--<progressbar style="height: 1px; margin: 0; padding: 0" value="progress"/>-->
            <!--</div>-->

            <div class="col-xs-12 col-md-8 col-lg-6">

                <div data-ng-if="mode === 'forward'" data-ng-hide="mode !== 'forward'">

                    <div data-ng-if="assess === 'self'" data-ng-hide="assess === 'auto'">
                        <div ng-include="'/modules/core/views/partial/forward-self.client.view.html'"></div>
                    </div>
                    <div data-ng-if="assess === 'auto'" data-ng-hide="assess === 'self'">
                        <div ng-include="'/modules/core/views/partial/forward-auto.client.view.html'"></div>
                    </div>
                </div>

                <div data-ng-if="mode === 'reverse'" data-ng-hide="mode !== 'reverse'">
                    <div data-ng-if="assess === 'self'" data-ng-hide="assess === 'auto'">
                        <div ng-include="'/modules/core/views/partial/reverse-self.client.view.html'"></div>
                    </div>

                    <div data-ng-if="assess === 'auto'" data-ng-hide="assess === 'self'">
                        <div ng-include="'/modules/core/views/partial/reverse-auto.client.view.html'"></div>
                    </div>
                </div>

                <div data-ng-if="mode === 'images'" data-ng-hide="mode !== 'images'">
                    <div data-ng-show="assess === 'self'" data-ng-hide="assess === 'auto'">
                        <div ng-include="'/modules/core/views/partial/images-self.client.view.html'"></div>
                    </div>

                    <div data-ng-show="assess === 'auto'" data-ng-hide="assess === 'self'">

                        <div ng-include="'/modules/core/views/partial/images-auto.client.view.html'"></div>
                    </div>
                </div>


                <div class="flashcard-section" data-ng-init="exportChallengeData()"
                     data-ng-if="authentication.user.roles.indexOf('debug-viewer') > -1">
                    <!--<pre>{{challengeData}}</pre>-->

                    <div class="row">
                        <div class="col-xs-6">
                            Done
                        </div>

                        <div class="col-xs-6">
                            {{challengeData.doneScore}}%
                        </div>
                    </div>


                    <div class="row">
                        <div class="col-xs-6">
                            Challenge
                        </div>

                        <div class="col-xs-6">
                            {{challengeData.challenge}}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-xs-6">
                            Cards in this course
                        </div>

                        <div class="col-xs-6">
                            {{challengeData.total}}
                        </div>
                    </div>


                    <div class="row">
                        <div class="col-xs-6">
                            Questions this session
                        </div>

                        <div class="col-xs-6">
                            {{challengeData.cardsProcessed}}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-xs-6">
                            Old cards
                        </div>

                        <div class="col-xs-6">
                            {{challengeData.oldCards}}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-xs-6">
                            Over 80%
                        </div>

                        <div class="col-xs-6">
                            {{challengeData.over80}}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-xs-6">
                            New cards
                        </div>

                        <div class="col-xs-6">
                            {{challengeData.newCards}}
                        </div>
                    </div>


                    <div style="padding-top: 1em">

                        <div class="row" data-ng-repeat="c in orderedCards">
                            <div style="color: green" data-ng-if="!c.new">
                                <div class="col-xs-1">
                                    {{$index}}
                                </div>


                                <div class="col-xs-5">
                                    {{c.name}}
                                </div>


                                <div class="col-xs-2">

                                    {{c.score}}
                                </div>

                                <div class="col-xs-2">
                                    {{c.predictedRetention}}
                                </div>
                                <div class="col-xs-2">
                                    <div data-ng-if="c.due">
                                    {{c.due | date:'shortDate'}}
                                    </div>
                                </div>
                            </div>

                            <div style="color: red" data-ng-if="c.new">
                                <div class="col-xs-1">
                                    {{$index}}
                                </div>


                                <div class="col-xs-5">
                                    {{c.name}}
                                </div>


                                <div class="col-xs-2">

                                    {{c.score}}
                                </div>

                                <div class="col-xs-2">
                                    {{c.predictedRetention}}
                                </div>
                                <div class="col-xs-2">
                                    <div data-ng-if="c.due">
                                        {{c.due | date:'shortDate'}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <!--<div data-ng-show="mode === 'images'" data-ng-hide="mode !== 'images'" style="height: 500px">-->


                <!--<div data-ng-show="assess === 'self'" data-ng-hide="assess === 'auto'">-->

                <!--<div ng-include="'/modules/core/views/partial/images-self.client.view.html'"></div>-->
                <!--</div>-->

                <!--<div data-ng-show="assess === 'auto'" data-ng-hide="assess === 'self'">-->
                <!--<div ng-include="'/modules/core/views/partial/images-auto.client.view.html'"></div>-->
                <!--</div>-->


                <!--</div>-->
            </div>


            <div class="col-md-2 col-lg-3 flashcard-right ">

                <!--<tr>-->
                <!--<td>Description</td>-->
                <!--<td class="left-padded-s">:</td>-->
                <!--<td class="left-padded-s nowrap">{{course.description}}</td>-->
                <!--</tr>-->


                <div class="section-right section-right-first">

                    <div class="title">Statistics</div>
                    <div>
                        {{card.retention}}% chance you remember this card
                    </div>
                    <div>
                        <div data-ng-if="lastRepetition">
                            Last repetition was on {{lastRepetition | date:'mediumDate'}}
                        </div>
                    </div>
                    <div>Question mode is {{mode}}</div>


                    <div style="padding-top: 1em">
                        <div data-ng-if="cards" style="display: inline">{{cards.length}}</div>
                        <div data-ng-if="!cards" style="display: inline">0</div>
                        <div style="display: inline"> Cards in this course</div>
                    </div>

                    <div>
                        <div data-ng-if="cards" style="display: inline">{{inPlay}}</div>
                        <div data-ng-if="!cards" style="display: inline">No cards</div>
                        <div style="display: inline"> are in play</div>
                    </div>
                    <div>
                        {{cardsRepeated}} cards repeated in this session
                    </div>
                </div>

                <div class="section-right">

                    <div class="title">Options</div>

                    <div data-ng-if="dueDateOnlyEnabled">
                        <input type="checkbox"
                               ng-model="options.dueDateOnly">
                        Only use cards with due date
                    </div>

                    <!--<div data-ng-if="!dueDateOnlyEnabled">-->
                    <!--<input type="checkbox" disabled>-->
                    <!--<span class="text-muted">Only use cards with due date (there are no cards with due dates in this-->
                    <!--pack)</span>-->
                    <!--</div>-->

                    <div class="practice-option">
                        <input type="checkbox"
                               ng-model="options.repeatOnly">
                        Only repeat questions. No new Cards, please.
                    </div>

                    <div class="practice-option">
                        <input type="checkbox"
                               ng-model="options.selfChecksOnly">
                        Self checks only. I'll practice spelling later.
                    </div>

                    <div class="practice-option">
                        <input type="checkbox"
                               ng-model="options.useForwardMode">
                        Use forward mode.
                    </div>


                    <div class="practice-option">
                        <input type="checkbox"
                               ng-model="options.useReverseMode">
                        Use reverse mode.
                    </div>


                    <div class="practice-option">
                        <input type="checkbox"
                               ng-model="options.useImageMode">
                        Use image mode.
                    </div>

                    <div class="practice-option">

                        Reading speed:

                        <rating style="padding-left: 0.5em"
                                max="6"
                                min="1"
                                value="speechIcons"
                                on-hover="rateHover(value)"
                                data-ng-click="rateClick()"
                                state-on="'glyphicon-ok-sign'" state-off="'glyphicon-ok-circle'">
                    </div>


                </div>


                <div class="section-right"  data-ng-if="authentication.user.roles.indexOf('debug-viewer') > -1">


                    <div class="title">Debug</div>


                    <!--<section data-ng-if="authentication.user.roles.indexOf('debug-viewer') > -1">-->


                    <!--<table class="table-striped top-margin-l top-padded-l card-border-top" data-ng-if="cards.length > 0">-->
                    <!--<thead>-->
                    <!--<tr>-->

                    <!--<th class="right-padded-m  top-padded-sm">Question</th>-->
                    <!--<th class="right-padded-m center-aligned top-padded-sm nowrap">Predicted Retention [hrs]</th>-->
                    <!--<th class="right-padded-m center-aligned top-padded-sm nowrap">Score</th>-->
                    <!--<th class="right-padded-m center-aligned top-padded-sm nowrap">History</th>-->


                    <!--</tr>-->
                    <!--</thead>-->
                    <!--<tbody>-->

                    <!--<tr>-->


                    <!--<tr data-ng-repeat="card in cards">-->


                    <!--<td class="right-padded-m standard-min-width top-padded top-aligned text-min-width">-->

                    <!--<a ng-class="checkForward(card)" data-ng-href="#!/cards/{{card._id}}/edit">{{card.question}}</a>-->
                    <!--</td>-->


                    <!--<td class="right-padded-m nowrap center-aligned top-aligned">-->


                    <!--<div data-ng-if="card.hrt">-->
                    <!--&lt;!&ndash;{{toHours(card.hrt)}}&ndash;&gt;-->
                    <!--{{toHours(card.hrt)}} hrs-->
                    <!--({{toSeconds(card.hrt)}} s)-->
                    <!--</div>-->

                    <!--<div data-ng-if="!card.hrt">-->
                    <!--n/a-->
                    <!--</div>-->
                    <!--</td>-->

                    <!--<td class="right-padded-m nowrap center-aligned top-aligned">-->


                    <!--{{ round(card.score)}}-->
                    <!--</td>-->

                    <!--<td class="text-muted right-padded-m nowrap center-aligned top-aligned">-->

                    <!--<div data-ng-repeat="h in card.history">-->
                    <!--{{toDate(h.when) | date:'d/M h:mm:ss'}}-->
                    <!--</div>-->
                    <!--</td>-->


                    <!--</tr>-->

                    <!--</tbody>-->
                    <!--</table>-->

                    <!--<div class="center-aligned top-padded-m">-->
                    <!--<button class="btn btn-rememberators" data-ng-click="clearHistory(card)">Clear Card History</button>-->
                    <!--<button class="btn btn-rememberators" data-ng-click="clearCourseHistory()">Clear Course History-->
                    <!--</button>-->
                </div>
            </div>
        </div>
    </div>

</section>

