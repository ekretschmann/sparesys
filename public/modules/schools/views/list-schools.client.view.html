<section data-ng-controller="SchoolsController" data-ng-init="find()">

    <div ng-include="'/modules/schools/views/partial/subscribe-to-school.modal.client.view.html'"></div>

    <div class="sparesys-header">
        <div class="pull-right">
            <input ng-model="searchText" class="form-control"
                           placeholder="Search">
        </div>
        <div class="sparesys-title">
            School Subscriptions
        </div>

    </div>


    <table id="searchTextResults" class="table-striped" style="width: 100%" data-ng-hide="schools.length === 0">
        <thead>
        <tr>
            <th></th>
            <th class="sparesys-view-courses-description-column">School</th>
            <th class="sparesys-view-courses-course-column">City</th>
            <th class="sparesys-view-courses-course-column">Country</th>
            <th class="sparesys-view-courses-course-column">Headmaster</th>
        </tr>
        </thead>
        <tbody>
        <tr data-ng-repeat="school in schools | filter:searchText">

            <td style="padding-right: 5px; white-space: nowrap">
                <a href="" data-ng-if="school.teachers.indexOf(authentication.user._id) != -1">
                    <i data-ng-click="areYouSureToUnsubscribeAsTeacherPopoup(school)"
                       class="glyphicon glyphicon-user">
                    </i>
                </a>
                <a href="" data-ng-if="school.students.indexOf(authentication.user._id) != -1">
                    <i data-ng-click="areYouSureToUnsubscribeAsStudentPopoup(school)"
                       class="glyphicon glyphicon-pencil">
                    </i>
                </a>
                </td>
            <td class="sparesys-view-courses-name-cell">
                <a href="" data-ng-click="areYouSureToSubscribePopoup(school)">{{school.name}}</a></td>
            <td class="sparesys-view-courses-course-column">{{school.city}}</td>
            <td class="sparesys-view-courses-course-column">{{school.country}}</td>

            <td class="sparesys-view-courses-name-cell">{{school.user.displayName}}</td>
        </tr>
        </tbody>
    </table>


    <div data-ng-hide="!schools.$resolved || schools.length">
        There are no Schools yet.

        <div data-ng-if="authentication.user.roles.indexOf('headmaster') > -1">
            In your role as headmaster, you can register a school following this
            <a href="/#!/schools/register">link</a> or use the menu.

        </div>
    </div>
</section>