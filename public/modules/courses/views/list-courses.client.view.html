<section data-ng-controller="CoursesController" data-ng-init="manageCourses()">

    <div ng-include="'/modules/courses/views/partial/delete-course.modal.client.view.html'"></div>

    <div class="large-screen-only title" data-ng-if="authentication.user.roles.indexOf('help') === -1">
        Manage Courses
    </div>

    <div class="small-screen-only title">
        Manage Courses
    </div>

    <div class="font-large">
        <div class="col-xs-12 col-md-6 dashboard-col large-screen-only"
             data-ng-if="authentication.user.roles.indexOf('help') > -1">
            <div class="virtual-card ribbon-card">


                <div class="help-ribbon"><span>Help</span></div>

                <div class="title">
                    Manage Courses
                </div>
                <div data-ng-if="courses.length > 0">
                    <infobox logo="man">

                        <div>
                            This is the list of courses you have subscribed to. You can use the
                            <a href="" class="nolink">
                                <i class="small glyphicon glyphicon-trash">
                                </i></a>
                            next to each course to delete the courses you no longer need. You can
                            edit, configure and change an existing course by clicking on the
                            <a href="" class="nolink">
                                <i class="small glyphicon glyphicon-edit">
                                </i></a> icon.

                            You can quickly edit the contents of the cards in a course by clicking
                            on the <a href="" class="nolink">
                            <i class="small glyphicon glyphicon-th">
                            </i></a> icon.
                        </div>


                        <div>
                            If you can't
                            find the course you are looking for in this list, you can
                            either <a href="/#!/courses/create">
                            create a new course
                        </a> or <a href="#!/courses/search">
                            search for an existing course.
                        </a>
                        </div>
                    </infobox>
                </div>
                <div data-ng-if="courses.length === 0">
                    <infobox logo="man">


                        <div>
                            You have not subscribed to any courses, yet. You can either <a href="/#!/courses/create">
                            create a new course
                        </a> or <a href="#!/courses/search">
                            search for an existing course.
                        </a>
                        </div>
                    </infobox>
                </div>
            </div>
        </div>


        <div class="col-xs-12 col-md-6 dashboard-col" data-ng-repeat="course in courses">
            <div class="virtual-card">
                <div class="title">

                    <div class="pull-right" data-ng-if="!course.supervised">


                        <button class="btn btn-default"
                                ng-csv="download(course)" lazy-load="true" filename="test.csv" field-separator=","
                                >Export to CSV (Lazy Load)</button>



                        <span data-ng-if="authentication.user.roles.indexOf('download') > -1">
                            <a data-ng-href="" data-ng-click="download(course)"><i class="glyphicon glyphicon-download"></i></a>
                        </span>

                        <a data-ng-href="#!/courses/{{course._id}}/edit"><i class="glyphicon glyphicon-edit"></i></a>

                        <a href="#!/courses/{{course._id}}/cards"><i class="glyphicon glyphicon-th"></i></a>


                        <a href="" data-ng-click="areYouSureToDeleteCourse(course)"><i
                                class="glyphicon glyphicon-trash"></i></a>

                    </div>
                </div>


                <div class="col-xs-6">
                    <div class="flashcard-section">
                        <div class="field-label">Description</div>
                        <div class="font-medium">
                            <div data-ng-if="course.description">
                                {{course.description}}
                            </div>

                            <div data-ng-if="!course.description" class="text-muted">
                                no description
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xs-6">
                    <div class="flashcard-section">
                        <div class="field-label">Published</div>
                        <div class="font-medium">
                            {{course.published}}

                        </div>
                    </div>
                </div>


                <div class="col-xs-6">
                    <div class="flashcard-section">
                        <div class="field-label">Front</div>
                        <div class="field-data">
                            {{course.front}}
                        </div>
                    </div>
                </div>

                <div class="col-xs-6">
                    <div class="flashcard-section">
                        <div class="field-label">Back</div>
                        <div class="font-medium">
                            {{course.back}}
                        </div>
                    </div>
                </div>

                <div class="col-xs-6">
                    <div class="flashcard-section">
                        <div class="field-label">Language Front</div>
                        <div class="font-medium">
                            <div data-ng-if="course.cardDefaults.languageFront">
                                {{course.cardDefaults.languageFront.name}}
                            </div>
                            <div data-ng-if="!course.cardDefaults.languageFront">
                                none
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xs-6">
                    <div class="flashcard-section">
                        <div class="field-label">Language Back</div>
                        <div class="font-medium">
                            <div data-ng-if="course.cardDefaults.languageBack">
                                {{course.cardDefaults.languageBack.name}}
                            </div>
                            <div data-ng-if="!course.cardDefaults.languageBack">
                                none
                            </div>
                        </div>
                    </div>
                </div>


                <div class="col-xs-6">
                    <div class="flashcard-section">
                        <div class="field-label">My Role</div>
                        <div class="font-medium">
                            <div data-ng-if="course.teaching">Teacher</div>
                            <div data-ng-if="!course.teaching">Student</div>
                        </div>
                    </div>
                </div>

                <div class="col-xs-6">
                    <div class="flashcard-section">
                        <div class="field-label">Supervision</div>
                        <div class="font-medium">
                            <div data-ng-if="course.supervised">This course is supervised</div>
                            <div data-ng-if="!course.supervised">You are managing this course yourself</div>

                        </div>
                    </div>
                </div>


                <!--<pre>{{course |json}}</pre>-->

            </div>
        </div>
    </div>


    <div class="rememberators-footer col-xs-12">

        rememberators.com
    </div>
</section>
