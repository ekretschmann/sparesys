<section data-ng-controller="SchoolsController" data-ng-init="findOne()">
<div class="content-header">

    <div ng-include="'/modules/schools/views/partial/delete-school.modal.client.view.html'"></div>
    <div ng-include="'/modules/schools/views/partial/edit-school.modal.client.view.html'"></div>
    <div ng-include="'/modules/schoolclasses/views/partial/add-class.modal.client.view.html'"></div>

    <div class="pull-right">

        <a class="menu-link"
           href=""
           data-ng-click="editSchoolPopup(school)"
           data-ng-show="authentication.user._id == school.user._id">
            Edit
        </a>

        <a class="menu-link"
           href=""
           data-ng-click="areYouSureToDeleteSchool(school)"
           data-ng-show="authentication.user._id == school.user._id">
            Delete
        </a>

        <a class="menu-link"
           href=""
           data-ng-click="addClassPopup()"
           data-ng-show="authentication.user._id == school.user._id">
            Add Classes
        </a>

    </div>

    <div class="title">
        {{school.name}}
    </div>


    <table>
        <tr>
            <td>City</td>
            <td class="left-padded">:</td>
            <td class="left-padded">{{school.city}}</td>
        </tr>
        <tr>
            <td>Country</td>
            <td class="left-padded">:</td>
            <td class="left-padded">{{school.country}}</td>
        </tr>
    </table>
</div>


<div data-ng-if="school.students.length === 0">
    <div class="content-section">
        <div class="title">
            Students
        </div>

        <table>
            <tr>
                <td class="top-aligned">
                    <div>

                        We are waiting for students to register for this school.
                        Please ask your students to subscribe to {{school.name}}, so
                        that you can assign them to their classes and teachers.
                    </div>
                </td>
                <td>
                    <img class="size-64"
                         src="/modules/core/img/brand/superhero-girl-medium.gif">
                </td>

            </tr>
        </table>

    </div>
</div>

<div data-ng-if="school.students.length > 0">

    <div class="content-section">

        <div class="title">
            Students
        </div>
        <table class="table-striped" style="width: 100%;">

            <tr>
                <th>Name</th>
                <th class="nobreak-label">Class</th>
            </tr>
            <tr data-ng-repeat="student in school.students"
                data-ng-controller="UsersController"
                data-ng-init="findStudent(student)">


                <td class="sparesys-view-object-content-cell">
                    {{student.displayName}}
                </td>


            </tr>
        </table>
    </div>
</div>

<div data-ng-if="school.teachers.length === 0">

    <div class="content-section">

        <div class="title">
            Teachers
        </div>

        <table>
            <tr>
                <td class="right-padded top-aligned">
                    <img class="size-64 "
                         src="/modules/core/img/brand/teacher-man-medium.gif">
                </td>
                <td class="top-aligned">
                    <div>

                        We are waiting for teachers to register for this school.
                        Please ask your teachers to subscribe to {{school.name}}, so
                        that you can assign them to their classes.
                    </div>
                </td>


            </tr>
        </table>

    </div>

</div>

<div data-ng-if="school.teachers.length > 0">
    <div class="content-section">
        <div class="title">
            Teachers
        </div>
        <table class="table-striped">

            <tr>
                <th>Name</th>
                <th class="nobreak-label">Teaches Classes</th>
            </tr>
            <tr data-ng-repeat="teacher in school.teachers"
                data-ng-controller="UsersController"
                data-ng-init="findTeacher(teacher)">


                <td class="expands">
                    {{teacher.displayName}}
                </td>
                <td>
                    <div data-ng-repeat="schoolclass in teacher.schoolclasses"
                         data-ng-controller="SchoolclassesController"
                         data-ng-init="findById(schoolclass)">
                        {{schoolclass.name}}<br/>
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div>


<div data-ng-show="school.schoolclasses.length === 0">
    <div class="content-section">

        <div class="title">
            Classes
        </div>

        <table>
            <tr>
                <td class="top-aligned">
                    <div>
                        This school has no classes, yet. You will have to set up classes to allow teachers
                        to assign courses to their students. Use the menue or this link
                        <a href="" ng-click="addClassPopup()">to create</a> the classes for this school.
                    </div>
                </td>
                <td>
                    <img class="size-64"
                         src="/modules/core/img/brand/teacher-woman-medium.gif">
                </td>

            </tr>
        </table>
    </div>
</div>


<div data-ng-show="school.schoolclasses.length > 0">

    <div class="content-section">

        <div class="title">
            Classes
        </div>

        <table class="table-striped">

            <thead>
            <tr>
                <th class="right-padded">Class Name</th>
                <th class="right-padded">Teachers</th>
                <th>Students</th>
            </tr>
            </thead>
            <tbody>
            <tr data-ng-repeat="schoolclass in school.schoolclasses"
                data-ng-controller="SchoolclassesController"
                data-ng-init="findById(schoolclass)">

                <td class="expands">
                    <a data-ng-href="#!/schoolclasses/{{schoolclass._id}}/edit">{{schoolclass.name}}</a>
                </td>

                <td class="right-padded">
                    {{schoolclass.teachers.length}}
                </td>
                <td>
                    {{schoolclass.students.length}}
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<small>
    <em class="text-muted">
        School created on
        <span data-ng-bind="school.created | date:'mediumDate'"></span>
        by
        <span data-ng-bind="school.user.displayName"></span>
    </em>
</small>
</section>