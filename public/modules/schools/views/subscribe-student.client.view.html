<section data-ng-controller="SchoolsController" data-ng-init="find()" class="font-large">

    <div ng-include="'/modules/schools/views/partial/subscribe-student.modal.client.view.html'"></div>
    <div ng-include="'/modules/schools/views/partial/unsubscribe-student.modal.client.view.html'"></div>


    <div class="large-screen-only " data-ng-show="authentication.user.roles.indexOf('help') === -1">
        <div class="title">Find School <input type="text"
                                              data-ng-model="searchText"
                                              class="form-control search"
                                              placeholder="School Name">
        </div>
    </div>

    <div class="small-screen-only">
        <div class="large-screen-only " data-ng-show="authentication.user.roles.indexOf('help') === -1">
            <div class="title">Find School <input type="text"
                                                  data-ng-model="searchText"
                                                  class="form-control search"
                                                  placeholder="School Name"></div>


        </div>
    </div>
    <div class="virtual-card col-xs-6 dashboard-col large-screen-only"
         data-ng-show="authentication.user.roles.indexOf('help') > -1">
        <div class="title">
            Find your School
        </div>


        <infobox logo="boy">
            Select your school(s) from the search results. You can use the search box to
            narrow down the options. After you have subscribed, your school administrator
            will be able to assign you to your class.
        </infobox>

        <div style="padding-top: 1em">
            School <input type="text"
                          data-ng-model="searchText"
                          class="form-control search"
                          placeholder="School Name">
        </div>

    </div>


    <div class="virtual-card col-xs-6 dashboard-col" data-ng-repeat="school in schools | filter: searchText | limitTo: 25">

        <div class="title">
            {{school.name}}
            <div class="pull-right"><a href="" data-ng-click="subscribeStudentPopup(school)"> <i
                    class="glyphicon glyphicon-plus-sign"></i></a>
            </div>
        </div>
        <div class="flashcard-section">
            <div class="col-xs-4 dashboard-col">
                <div class="field-label">City</div>
                <div class="font-medium">
                    {{school.city}}
                </div>
            </div>

            <div class="col-xs-4 dashboard-col">
                <div class="field-label">Country</div>
                <div class="font-medium">
                    {{school.country}}
                </div>
            </div>

            <div class="col-xs-4 dashboard-col">
                <div class="field-label">Administrator</div>
                <div class="font-medium">
                    {{school.user.displayName}}
                </div>
            </div>
        </div>

        <div class="flashcard-section">
            <div class="col-xs-4 dashboard-col">
                <div class="field-label">Teachers</div>
                <div class="font-medium">
                    {{school.teachers.length}}
                </div>
            </div>

            <div class="col-xs-8 dashboard-col">
                <div class="field-label">Students</div>
                <div class="font-medium">
                    {{school.students.length}}
                </div>
            </div>

        </div>

        <div data-ng-if="school.schoolclasses.length === 0">
            <div class="col-xs-12 warning dashboard-col">
                <div class="field-label">Classes</div>
                <div class="font-medium">
                    School has no classes
                </div>
            </div>
        </div>


        <div data-ng-if="school.schoolclasses.length > 0">

            <div class="flashcard-section">

                <div class="col-xs-4 dashboard-col-attached field-label">
                    Classes
                </div>

                <div class="col-xs-4 dashboard-col-attached field-label">
                    Teachers
                </div>

                <div class="col-xs-4 dashboard-col-attached field-label">
                    Students
                </div>

            </div>
            <div data-ng-repeat="schoolclass in school.schoolclasses">


                <div class="col-xs-4 dashboard-col-attached font-medium">

                    {{schoolclass.name}}
                </div>

                <div class="col-xs-4 dashboard-col-attached font-medium">
                    <div class="danger"
                         data-ng-if="schoolclass.teachers.length === 0">
                        none
                    </div>

                    <div
                            data-ng-if="schoolclass.teachers.length > 0">
                        {{schoolclass.teachers.length}}
                    </div>
                </div>

                <div class="col-xs-4 dashboard-col-attached font-medium">
                    <div class="danger"
                         data-ng-if="schoolclass.students.length === 0">
                        none
                    </div>

                    <div
                            data-ng-if="schoolclass.students.length > 0">
                        {{schoolclass.students.length}}
                    </div>
                </div>


            </div>
        </div>


    </div>

    <!--<div class="popup-header">-->
    <!--<div class="pull-right">-->
    <!--<input ng-model="searchText"-->
    <!--class="form-control search focus"-->
    <!--placeholder="Search">-->
    <!--</div>-->
    <!--<div class="title">-->
    <!--Student School Subscriptions-->
    <!--</div>-->

    <!--</div>-->

    <!--<div data-ng-if="schools.length > 0">-->


    <!--<section data-ng-if="authentication.user.roles.indexOf('help') > -1">-->
    <!--<div class="content-section">-->
    <!--<infobox logo="boy" position="left">-->
    <!--Select your school(s) from the list below. You can use the search box to-->
    <!--narrow down the options. After you have subscribed, your school administrator-->
    <!--will be able to assign you to your class. You will find a pencil icon next-->
    <!--to all the schools you have subscribed to. If you want to unsubscribe from-->
    <!--a school, click on the school name again.-->
    <!--</infobox>-->
    <!--</div>-->
    <!--</section>-->

    <!--<table id="searchTextResults" class="table-striped">-->
    <!--<thead>-->
    <!--<tr>-->

    <!--<th class="expands right-padded-m">School</th>-->
    <!--<th class="right-padded-m">City</th>-->
    <!--<th class="right-padded-m">Country</th>-->
    <!--<th>Administrator</th>-->
    <!--</tr>-->
    <!--</thead>-->
    <!--<tbody>-->
    <!--<tr data-ng-repeat="school in schools | filter:searchText">-->

    <!--<td class="right-padded-m nowrap left-padded-s top-padded-s">-->
    <!--<div data-ng-if="school.students.indexOf(authentication.user._id) != -1">-->
    <!--<a href="" data-ng-click="unsubscribeStudentPopup(school)">{{school.name}}-->
    <!--<i-->
    <!--class="glyphicon glyphicon-pencil">-->
    <!--</i>-->
    <!--</a>-->
    <!--</div>-->

    <!--<div data-ng-if="school.students.indexOf(authentication.user._id) === -1">-->
    <!--<a href="" data-ng-click="subscribeStudentPopup(school)">{{school.name}}</a>-->
    <!--</div>-->
    <!--</td>-->

    <!--<td class="right-padded-m nowrap top-padded-s">{{school.city}}</td>-->
    <!--<td class="right-padded-m nowrap top-padded-s">{{school.country}}</td>-->

    <!--<td class="nowrap right-padded-s top-padded-s">{{school.user.displayName}}</td>-->
    <!--</tr>-->
    <!--</tbody>-->
    <!--</table>-->
    <!--</div>-->

    <!--<div data-ng-hide="!schools.$resolved || schools.length">-->
    <!--There are no Schools yet.-->

    <!--<div data-ng-if="authentication.user.roles.indexOf('headmaster') > -1">-->
    <!--In your role as headmaster, you can register a school following this-->
    <!--<a href="/#!/schools/register">link</a> or use the menu.-->

    <!--</div>-->
    <!--</div>-->
</section>
